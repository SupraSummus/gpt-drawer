{% extends 'base.html' %}

{% block content %}
  <main class="container">
    <form method="post" action="{% url 'notes:note_reference_answer' note_reference.id %}">
      {% csrf_token %}

      <h2>Question</h2>
      <p>{{ note_reference.question }}</p>
      <button type="submit" name="more_context">I need more context</button>
      <button type="submit" name="not_relevant">Not relevant</button>
      <button type="submit" name="ask_later">Ask me later</button>

      <h2>Answer</h2>
      <textarea name="answer" rows="4"
        hx-get="{% url 'notes:note_reference_answer_suggested_notes' note_reference.id %}"
        hx-trigger="input change"
        hx-target="#suggested_notes"
        hx-swap="outerHTML"
        hx-vals="answer"
      >{{ note_reference.answer }}</textarea>
      <button type="submit" name="create_note">Create note</button>

      <h2>Suggested Notes</h2>
      {% block suggested_notes %}
        <div id="suggested_notes">
          {% for note in suggeted_notes %}
            <article>
              <h3>{{ note.title }}</h3>
              <p>{{ note.question }}</p>
              <button type="submit" name="note_id" value="{{ note.id }}">Select</button>
            </article>
          {% endfor %}
        </div>
      {% endblock %}

    </form>
  </main>
{% endblock %}
